device: "cuda"
seed: 42

data:
  root_dir: "data"
  real_dir: "REAL_224"
  fake_dir: "FAKE_224"
  image_size: 224
  max_images_total: 120000
  group_split_json: "artifacts/audit_split/split_groups.json"

  split:
    train: 0.8
    val: 0.1
    test: 0.1

model:
  backbone: "swin_t"
  fusion_dim: 256
  use_phase: false
  pretrained_spatial: true

train:
  batch_size: 64
  num_workers: 4
  epochs: 40
  lr: 0.0002
  weight_decay: 0.0001
  class_weights: [1.3, 1.0]
  aux_loss_weight: 0.3
  temperature_scaling: true
  precision_min_for_safe_threshold: 0.80
  early_stopping:
    enabled: true
    patience: 6
    min_epochs: 10
    min_delta_score: 0.0005
  selection:
    recall_weight: 0.10        # score = AP + recall_weight*rec@pmin - penalizaciones
    val_loss_weight: 0.20      # penaliza val_loss empeorando vs best_val_loss
    gap_weight: 0.35           # penaliza gap (val_loss - train_eval_loss)
    gap_target: 0.00
  # --- estabilidad ---
  grad_clip_norm: 1.0          # 0 o negativo => desactivar
  label_smoothing: 0.0         # 0 => desactivar (recomendado 0.02~0.05 si overfit duro)
  train_eval_subset: 4000      # nยบ de muestras de train para calcular train_eval_loss comparable
  # --- scheduler opcional ---
  scheduler:
    name: "cosine"
    warmup_epochs: 2
    min_lr: 1.0e-6

output:
  checkpoint_dir: "artifacts/checkpoints"
  report_dir: "artifacts/reports"
  model_version: "v1.0"
